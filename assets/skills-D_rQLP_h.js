import{d as e,i as t,l as n,s as r}from"./index-CPTTO0Pm.js";import{U as i,W as a,c as o,d as s,i as c,l,n as u,r as d,t as f,u as p}from"./TopBar-B1DBJU3c.js";var m=e(n()),h=e(r(),1);const g=({id:e,size:t,style:n})=>(0,h.jsx)(`img`,{alt:`Skill ${e}`,loading:`lazy`,src:`/skillImages/${e}.png`,style:{width:t,height:t,aspectRatio:1,...n}});var _={1:`Speed`,2:`Stamina`,3:`Power`,4:`Guts`,5:`Wit`,8:`Field of view`,9:`Recovery`,10:`Start delay`,13:`Rushed`,21:`Current speed`,27:`Target speed`,28:`Lane movement`,31:`Acceleration`},v=(e,t)=>{let n=t>0?`up`:`down`;return e===`8`?`${t>0?`+`:``}${t/1e4}ยบ Deg`:e===`9`?`${t/100}%`:e.length<2?`${n} ${Math.abs(t/1e4)}`:e===`10`?`x${t/1e4}`:[`21`,`27`,`28`].includes(e)?`${t/1e4} m/s`:e===`31`?`${t/1e4} m/s^2`:t/1e4},y=({skill:e})=>{let[t]=e.alternatives;if(!t)return null;let{baseDuration:n=0,effects:r=[]}=t;return(0,h.jsxs)(l,{sx:{display:`flex`,flex:1,flexDirection:`column`},children:[(0,h.jsxs)(p,{variant:`caption`,sx:{marginTop:1},children:[`Duration: `,n>=1?`${n/1e4}s`:`instant`]}),r?.map((e,t)=>(0,h.jsx)(b,{effect:e},`eff${t}-${e.target}${e.type}`))]})},b=({effect:e})=>{let t=e?.type?`${e.type}`:`-1`;return(0,h.jsxs)(p,{variant:`caption`,children:[_[t]??t,` `,v(t,e.modifier)]})},x=y,S=({skill:e,selected:n,setSelected:r})=>{let{tags:i}=t(e=>e.tags);return(0,h.jsxs)(c,{rarity:e.rarity,children:[(0,h.jsxs)(l,{sx:{display:`flex`,alignItems:`center`},children:[(0,h.jsx)(g,{id:e.iconId,size:32,style:{marginRight:8}}),(0,h.jsx)(p,{fontSize:14,sx:{flex:1,fontWeight:600},children:e.name}),(0,h.jsx)(s,{label:`${e.baseCost} SP`}),(0,h.jsx)(d,{selected:n,onToggle:()=>r(t=>n?t.filter(t=>t.id!==e.id):[...t,e])})]}),(0,h.jsxs)(`div`,{style:{display:`flex`,flex:1,flexDirection:`row`,alignItems:`center`,gap:1},children:[(0,h.jsx)(x,{skill:e}),(0,h.jsx)(l,{sx:{display:`flex`,flex:1,justifyContent:`flex-end`,flexWrap:`nowrap`,gap:1,overflowX:`auto`},children:e.explicit_tags.slice(0,8).map(e=>{let t=i?.includes(e);return(0,h.jsx)(s,{label:e,size:`small`,color:t?`success`:`default`,sx:{flex:`0 0 auto`}},e)})})]}),(0,h.jsx)(C,{skill_id:e.id})]})},C=({skill_id:e})=>{let t=i.reduce((t,n)=>{let r=n.event_skills.map(e=>e?.id);return n.hints.hint_skills.map(e=>e?.id).includes(e)&&t.hint.push(n),r.includes(e)&&t.event.push(n),t},{event:[],hint:[]});return t.event.length===0&&t.hint.length===0?null:(0,h.jsxs)(h.Fragment,{children:[t.event.length===0?null:(0,h.jsxs)(l,{style:{marginTop:8,flexDirection:`row`,display:`flex`,alignItems:`center`,flexWrap:`wrap`,gap:4},children:[(0,h.jsx)(p,{variant:`caption`,children:`From event:`}),t.event.map((e,t)=>(0,h.jsx)(o,{card:e,size:32,style:{}},t))]}),t.hint.length===0?null:(0,h.jsxs)(l,{style:{marginTop:8,flexDirection:`row`,display:`flex`,alignItems:`center`,flexWrap:`wrap`,gap:4},children:[(0,h.jsx)(p,{variant:`caption`,children:`From hints:`}),t.hint.map((e,t)=>(0,h.jsx)(o,{card:e,size:32,style:{}},t))]})]})},w=({list:e,selected:t,setSelected:n})=>(0,h.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill,minmax(280px,1fr))`,gap:12,paddingTop:8},children:e.map(e=>(0,h.jsx)(S,{skill:e,selected:!!t.find(t=>t.id===e.id),setSelected:n},e.id))});function T(){let{tags:e}=t(e=>e.tags),[n,r]=(0,m.useState)(``),[i,o]=(0,m.useState)([]),s=(0,m.useMemo)(()=>a.filter(t=>{let r=t?.name?.toLowerCase()??``,i=!0,a=!0;return n?.length>2&&(i=r.includes(n.toLowerCase())),e.length>0&&(a=e.every(e=>t.tags.includes(e))),i&&a}),[n,e]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f,{query:n,onQueryChange:r}),(0,h.jsx)(u,{active:e}),(0,h.jsxs)(`div`,{style:{padding:16},children:[(0,h.jsxs)(`div`,{style:{marginBottom:12},children:[(0,h.jsxs)(p,{component:`h3`,children:[`Selected (`,i.length,`)`]}),(0,h.jsx)(E,{skills:i}),(0,h.jsx)(w,{list:i,selected:i,setSelected:o})]}),(0,h.jsx)(p,{component:`h3`,children:`Skills`}),(0,h.jsx)(w,{list:s,selected:i,setSelected:o})]})]})}var E=({skills:e=[]})=>{let t=e.reduce((e,t)=>{let{baseCost:n,rarity:r}=t;return e+(r===2?n*2:n)},0),n=e.reduce((e,t)=>{let{baseCost:n,rarity:r}=t;return e+((r===2?n*2:n)-2*n/10)},0),r=Math.max(Math.ceil((n-270-336)/60),0);return e.length?(0,h.jsxs)(`div`,{style:{marginBottom:8},children:[(0,h.jsxs)(p,{children:[`Total Pts `,t,` (`,n,` with avg 2 hints)`]}),(0,h.jsxs)(p,{children:[`Approximate G1 Races `,r]})]}):null};export{T as component};